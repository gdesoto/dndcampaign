services:
  dndcampaign:
    build:
      context: .
      dockerfile: docker/Dockerfile
    image: dndcampaign:latest
    container_name: dndcampaign
    restart: unless-stopped
    ports:
      - "3000:3000"
    environment:
      NODE_ENV: production
      HOST: 0.0.0.0
      NITRO_PORT: 3000
      DATABASE_URL: "file:/data/db/app.db"
      STORAGE_PROVIDER_DEFAULT: "local"
      STORAGE_LOCAL_ROOT: "/data/storage"
      NUXT_SESSION_PASSWORD: "change_this_to_a_long_random_value"
      ELEVENLABS_API_KEY: ""
      ELEVENLABS_WEBHOOK_SECRET: ""
      ELEVENLABS_WEBHOOK_ID: ""
      RUN_MIGRATIONS: "1"
    volumes:
      - /mnt/user/appdata/dndcampaign:/data
